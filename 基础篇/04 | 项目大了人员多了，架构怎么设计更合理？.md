# 04 | 项目大了人员多了，架构怎么设计更合理？
进行架构整治，将业务完全解耦，将通用功能下沉，每个业务都是一个独立的 Git 仓库，每个业务都能够生成一个 Pod 库，最后再集成到一起。这样经过架构整治以后，也就没再出现过先前的窘境，开发效率也得到了极大的提升。由此可见，合理的架构是多么得重要。

## 三个问题
+ 模块粒度应该如何划分？
+ 如何分层？
+ 多团队如何协作？

## 1.模块粒度应该怎么划分
**模块划分五个原则**
+ 单一功能原则：对象功能要单一，不要在一个对象里添加很多功能。
+ 开闭原则：扩展是开放的，修改是封闭的。
+ 里氏替换原则：子类对象是可以替代基类对象的。
+ 接口隔离原则：接口的用途要单一，不要在一个接口上根据不同入参实现多个功能。
+ 依赖反转原则：方法应该依赖抽象，不要依赖实例。iOS 开发就是高层业务方法依赖于协议。

**iOS 组件，应该是包含 UI 控件、相关多个小功能的合集，是一种粒度适中的模块**

## 2.如何分层
**重新梳理组件之间的逻辑关系，进行改造**
+ 底层可以是与业务无关的基础组件，比如网络和存储等；
+ 中间层一般是通用的业务组件，比如账号、埋点、支付、购物车等；
+ 最上层是迭代业务组件，更新频率最高。

## 3.多团队如何协作
总结来讲，我想说的是团队分工要灵活，不要把人员隔离固化了，否则各干各的，做的东西相互都不用。核心上，团队分工还是要围绕着具体业务进行功能模块提炼，去解决重复建设的问题，在这个基础上把提炼出的模块做精做扎实。否则，拉一帮子人臆想出来的东西，无人问津，那就是把自己架空了。
